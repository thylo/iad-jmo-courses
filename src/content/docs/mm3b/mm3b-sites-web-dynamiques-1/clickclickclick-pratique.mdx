---
title: Clickclickclick - La pratique
description: Apprendre l'interactivit√© en cr√©ant un d√©tecteur de clics
---

import { Card, CardGrid } from '@astrojs/starlight/components';
import LiveCodeEditor from '../../../components/mdx/LiveCodeEditor/LiveCodeEditor.astro';

## L'≈ìuvre : clickclickclick.click

Le studio Moniker a cr√©√© [clickclickclick.click](https://clickclickclick.click/) ‚Äî une exp√©rience minimaliste et perturbante.

Chaque fois que tu cliques, le site **te surveille**. Il enregistre ta position, le nombre de clics, la vitesse. Au bout de quelques clics, tu r√©alises : tu laisses une trace. C'est une critique du web moderne : on croit juste cliquer, mais chaque geste est collect√©, analys√©, vendu.

**Le code derri√®re cette critique est simple.** C'est √ßa que tu vas apprendre.

---

## Testez l'exp√©rience

Clique n'importe o√π sur cette zone. Le site te surveille :

<LiveCodeEditor example="mm3b/clickclickclick-simple" height="400px" />

:::tip[Explorez]
- Clique rapidement, puis lentement
- Clique partout, dans les coins, au centre
- Regarde comment tes donn√©es s'accumulent
:::

---

## Ce que vous venez de faire

Vous n'avez pas juste cliqu√©. Vous avez :
- **Laiss√© une trace** : chaque clic est enregistr√©
- **R√©alis√© une surveillance** : le site sait o√π vous avez cliqu√©
- **D√©couvert une critique** : on croit √™tre libre, mais on est observ√©

C'est √ßa, la narration interactive sur le web. **L'interaction elle-m√™me raconte l'histoire.**

---

## Le code expliqu√©

Voici comment cette exp√©rience fonctionne. Nous parlons du code comme d'un sc√©nario : "QUAND l'utilisateur fait √ßa, ALORS ceci se passe".

### 1. √âcouter les clics

```javascript
// QUAND quelqu'un clique n'importe o√π
document.addEventListener('click', function(event) {

  // ALORS nous le savons. Le "event" contient des infos sur le clic
  console.log('Clic d√©tect√© √† :', event.clientX, event.clientY);
});
```

**√âquivalent narratif** : "Chaque fois que le spectateur agit, l'histoire enregistre son action."

### 2. Compter les clics

```javascript
let nombreClics = 0;

document.addEventListener('click', function(event) {
  // √Ä chaque clic, on ajoute 1
  nombreClics = nombreClics + 1;

  // On affiche le compteur
  console.log('Clics : ' + nombreClics);
});
```

**La variable `nombreClics` est la m√©moire de l'histoire.** Elle accumule, elle grandit.

### 3. Afficher le r√©sultat

```javascript
let nombreClics = 0;
const output = document.getElementById('compteur');

document.addEventListener('click', function(event) {
  nombreClics = nombreClics + 1;

  // EMBRANCHEMENT NARRATIF : selon le nombre de clics
  if (nombreClics === 1) {
    output.textContent = 'Vous avez cliqu√©.';
  } else if (nombreClics < 5) {
    output.textContent = `Vous avez cliqu√© ${nombreClics} fois. Continuez...`;
  } else {
    output.textContent = `${nombreClics} clics. Vous √™tes observ√©.`;
  }
});
```

**C'est une histoire ramifi√©e.** Selon vos actions, le texte change. Vous cr√©ez le r√©cit par vos clics.

---

## D√©fis progressifs

### D√©fi 1 : Le compteur simple

**Objectif** : Cr√©ez une page qui compte chaque clic et affiche le nombre.

**Points cl√©s √† utiliser :**
- `addEventListener('click', ...)`
- Une variable qui augmente
- `output.textContent = ...`

**Template** :
```html
<div id="compteur">0 clics</div>
```

```javascript
let count = 0;
const output = document.getElementById('compteur');

document.addEventListener('click', function() {
  count = count + 1;
  output.textContent = count + ' clics';
});
```

**D√©fi bonus** : Que se passe-t-il si tu cliques sur le compteur lui-m√™me ? Peut-tu l'emp√™cher ? (Indice: `event.stopPropagation()`)

---

### D√©fi 2 : Ajouter du contexte

**Objectif** : Au lieu de juste un nombre, affiche aussi si tu cliques rapidement ou lentement.

**Points cl√©s :**
- Stocker le dernier clic (`lastClickTime`)
- Calculer la diff√©rence
- Adapter le message selon la vitesse

**Points de d√©part** :
```javascript
let lastClickTime = 0;
const delai = 300; // milliseconds

document.addEventListener('click', function() {
  const maintenant = Date.now();
  const tempsEcoule = maintenant - lastClickTime;

  // Si moins de 300ms depuis le dernier clic...
  if (tempsEcoule < delai) {
    output.textContent = '‚ö° Clic rapide !';
  } else {
    output.textContent = 'üê¢ Clic lent';
  }

  lastClickTime = maintenant;
});
```

**Qu'est-ce que tu comptes ?** Chaque "interaction rapide" vs "interaction lente" raconte quelque chose sur le spectateur.

---

### D√©fi 3 : Tracer les positions

**Objectif** : Affiche les coordonn√©es (X, Y) de chaque clic.

**Points cl√©s :**
- `event.clientX` et `event.clientY` ‚Üí position de la souris
- Template strings pour afficher joliement

**Points de d√©part** :
```javascript
document.addEventListener('click', function(event) {
  const x = event.clientX;
  const y = event.clientY;

  output.textContent = `Clic √† (${x}, ${y})`;
});
```

**Variation** : Peux-tu calculer la distance entre deux clics ? (Indice: `Math.sqrt((x2-x1)¬≤ + (y2-y1)¬≤)`)

---

### D√©fi 4 : Heatmap (stretch goal)

**Objectif** : √Ä chaque clic, cr√©e un petit point rouge √† cette position. √áa cr√©e une "carte de chaleur" de tes clics.

**Points cl√©s :**
- `document.createElement('div')` ‚Üí cr√©er un √©l√©ment
- `style.position = 'fixed'`, `style.left`, `style.top` ‚Üí le placer
- `document.body.appendChild(...)` ‚Üí l'ajouter √† la page

**Points de d√©part** :
```javascript
document.addEventListener('click', function(event) {
  // Cr√©er un petit point
  const point = document.createElement('div');

  // Le styliser
  point.style.position = 'fixed';
  point.style.left = event.clientX + 'px';
  point.style.top = event.clientY + 'px';
  point.style.width = '8px';
  point.style.height = '8px';
  point.style.backgroundColor = 'red';
  point.style.borderRadius = '50%';
  point.style.opacity = '0.5';

  // L'ajouter √† la page
  document.body.appendChild(point);
});
```

**Variation avanc√©e** : Les points disparaissent apr√®s 3 secondes. (Indice: `setTimeout(function() { point.remove(); }, 3000)`)

---

## Questions fr√©quentes

**Q: Mon compteur augmente m√™me quand je clique sur le compteur lui-m√™me?**

R: Oui, c'est normal. Les √©v√©nements "remontent" (c'est du **event bubbling**). Si tu veux l'emp√™cher, ajoute √† ton code du compteur :

```javascript
output.addEventListener('click', function(event) {
  event.stopPropagation();  // Emp√™che l'√©v√©nement de remonter
});
```

**Q: Pourquoi `let count = 0` et pas `const count = 0`?**

R: Parce que `count` change (il augmente). Les `let` peuvent changer. Les `const` ne peuvent pas. (`const` = constant)

**Q: Et si j'oublie les parenth√®ses : `addEventListener('click', maFonction())`?**

R: Tu appelles la fonction imm√©diatement (avant le clic). Tu dois passer la fonction elle-m√™me, pas son r√©sultat. Voir ["Appel vs r√©f√©rence" dans la th√©orie ‚Üí](javascript-fondamentaux)

---

## Si tu bloques

**"Je ne sais pas comment s√©lectionner un √©l√©ment"** ‚Üí [S√©lectionner un √©l√©ment (th√©orie)](javascript-fondamentaux)

**"Je ne comprends pas ce qu'est `addEventListener`"** ‚Üí [√âcouter les √©v√©nements (th√©orie)](javascript-fondamentaux)

**"Je modifie le DOM mais rien ne change"** ‚Üí [Modifier le DOM (th√©orie)](javascript-fondamentaux)

**"Mon code ne marche pas et je ne sais pas pourquoi"** ‚Üí [Pi√®ges courants (th√©orie)](javascript-fondamentaux)

---

## Ce que tu as appris

<CardGrid>
  <Card title="Interaction = Narration">
    Un clic n'est pas juste une action technique. C'est un geste que tu enregistres, que tu utilises pour raconter une histoire.
  </Card>
  <Card title="Le code √©crit un sc√©nario">
    `addEventListener` = "d√©clencher une action quand..." ; `if/else` = "embranchement narratif"
  </Card>
  <Card title="Tu contr√¥les ce qu'on voit">
    Chaque modification du DOM change la narration. C'est toi qui d√©cides ce que le spectateur voit et comprend.
  </Card>
</CardGrid>

---

## Prochaine √©tape

Quand tu ma√Ætrises √ßa, tu peux passer √† la prochaine exp√©rience : **Le personnage qui vous observe** (mouvement de souris, √©motion, transformation d'un personnage selon ton regard).

Mais d'abord, finis tes d√©fis. üéØ